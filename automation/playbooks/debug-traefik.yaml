---
- name: Debug Traefik Logs
  hosts: localhost
  connection: local
  gather_facts: false
  tasks:
    - name: Get Traefik container status
      ansible.builtin.shell: |
        ssh -o BatchMode=yes -o StrictHostKeyChecking=no root@172.16.110.101 "pct exec 210 -- docker ps -a"
      register: traefik_status
      ignore_errors: true

    - name: Get Traefik logs via Proxmox
      ansible.builtin.shell: |
        ssh -o BatchMode=yes -o StrictHostKeyChecking=no root@172.16.110.101 "pct exec 210 -- docker logs traefik"
      register: traefik_logs
      ignore_errors: true

    - name: Show status
      ansible.builtin.debug:
        msg: "{{ traefik_status.stdout_lines }}"

    - name: Show logs
      ansible.builtin.debug:
        msg: "{{ traefik_logs.stdout_lines }}"
