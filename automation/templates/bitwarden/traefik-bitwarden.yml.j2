# Traefik Dynamic Configuration for Bitwarden Lite
# File: /opt/traefik/config/bitwarden.yml
# Auto-generated by Ansible - DO NOT EDIT MANUALLY

http:
  routers:
    bitwarden-rtr:
      rule: "Host(`{{ bitwarden_domain }}`)"
      entryPoints:
        - websecure
      service: bitwarden-svc
      tls:
        certResolver: cloudflare
      middlewares:
        - bitwarden-headers
  
  services:
    bitwarden-svc:
      loadBalancer:
        servers:
          - url: "http://{{ ansible_host }}:{{ bitwarden_port }}"
  
  middlewares:
    bitwarden-headers:
      headers:
        stsSeconds: 31536000
        stsIncludeSubdomains: true
        contentTypeNosniff: true
        frameDeny: true
        referrerPolicy: "same-origin"
        customResponseHeaders:
          X-Robots-Tag: "noindex, nofollow"
